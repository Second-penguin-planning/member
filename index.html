<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>業務アーカイブ（内部用）</title>

<style>
body { font-family: sans-serif; background:#f4f6f8; margin:0; }
#login-box { text-align:center; margin-top:100px; }
#archive { display:none; padding:30px; }
h1 { border-bottom:2px solid #333; padding-bottom:5px; }
.category { margin-top:25px; }
.category h2 { background:#333; color:#fff; padding:8px; font-size:16px; }
ul { list-style:none; padding-left:15px; }
li { margin:6px 0; }
a { text-decoration:none; color:#0066cc; cursor:pointer; }
.content-box { margin-top:15px; padding:15px; background:#fff; border:1px solid #ddd; display:none; }
button { padding:6px 12px; margin-top:5px; }
textarea { width:100%; height:120px; }
select, input { width:100%; padding:6px; margin-top:5px; }
#form-area { background:#fff; padding:15px; border:1px solid #ccc; margin-bottom:20px; display:none; }
</style>

<script>
function checkPass() {
    if(document.getElementById("pass").value === "2405"){
        document.getElementById("login-box").style.display="none";
        document.getElementById("archive").style.display="block";
        loadEntries();
    } else { alert("パスコードが違います"); }
}

function showContent(id){
    document.querySelectorAll(".content-box").forEach(e=>e.style.display="none");
    document.getElementById(id).style.display="block";
}

function toggleForm(){
    var f = document.getElementById("form-area");
    f.style.display = (f.style.display==="none") ? "block" : "none";
}

function saveEntry(){
    var category = document.getElementById("category").value;
    var title = document.getElementById("title").value;
    var content = document.getElementById("content").value;
    if(!title || !content){ alert("項目と内容は必須です"); return; }

    var entries = JSON.parse(localStorage.getItem("entries") || "[]");
    entries.push({category,title,content});
    localStorage.setItem("entries", JSON.stringify(entries));

    alert("保存しました");
    document.getElementById("title").value="";
    document.getElementById("content").value="";
    loadEntries();
}

function loadEntries(){
    var entries = JSON.parse(localStorage.getItem("entries") || "[]");
    entries.forEach((e,index)=>{
        if(document.getElementById("entry-"+index)) return;

        var li = document.createElement("li");
        li.innerHTML = '<a onclick="showContent(\'entry-'+index+'\')">'+e.title+'</a>';
        document.getElementById(e.category+"-list").appendChild(li);

        var div = document.createElement("div");
        div.className="content-box";
        div.id="entry-"+index;
        div.innerHTML="<h3>"+e.title+"</h3><p>"+e.content.replace(/\n/g,"<br>")+"</p>";
        document.getElementById("content-area").appendChild(div);
    });
}
</script>
</head>
<body>

<div id="login-box">
<h2>業務アーカイブ（内部用）</h2>
<p>4桁のパスコード</p>
<input type="password" id="pass" maxlength="4">
<button onclick="checkPass()">ログイン</button>
</div>

<div id="archive">
<h1>業務アーカイブ</h1>

<button onclick="toggleForm()">＋ 新規掲載登録</button>

<div id="form-area">
<h3>掲載登録フォーム</h3>
<select id="category">
<option value="nyukan">入管</option>
<option value="hojokin">補助金</option>
<option value="seido">制度</option>
<option value="kikaku">事業企画</option>
<option value="data">データ管理</option>
<option value="other">その他</option>
</select>

<input type="text" id="title" placeholder="項目名">
<textarea id="content" placeholder="内容（長文可）"></textarea>
<button onclick="saveEntry()">保存</button>
</div>

<div class="category">
<h2>入管</h2>
<ul id="nyukan-list"></ul>
</div>

<div class="category">
<h2>補助金</h2>
<ul id="hojokin-list"></ul>
</div>

<div class="category">
<h2>制度</h2>
<ul id="seido-list"></ul>
</div>

<div class="category">
<h2>事業企画</h2>
<ul id="kikaku-list"></ul>
</div>

<div class="category">
<h2>データ管理</h2>
<ul id="data-list"></ul>
</div>

<div class="category">
<h2>その他</h2>
<ul id="other-list"></ul>
</div>

<div id="content-area"></div>

</div>
</body>
</html>
